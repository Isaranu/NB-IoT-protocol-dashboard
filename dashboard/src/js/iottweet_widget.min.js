var currentChartSpawned,currentGaugeSpawned,currentLabelValueSpawned,currentMixedChartSpawned,target_spawn_div,labelvalue_id_button,chart=[],gauge=[],labelValue=[],mixedChart=[],_numChart=0,_numGauge=0,_numLabelValue=0,_numMixedChart=0,spawnChartCanvas=[],spawnGaugeCanvas=[],spawnLabelValue=[],spawnMixedChartCanvas=[],chart_position=[],gauge_position=[],labelvalue_position=[],mixedChart_position=[],buff_div=[],mixedChart_buff_div=[],born_pos_left=0,born_pos_top=0,pos_left_offset=10,pos_top_offset=10,pos_label=[],gauge_pos_label=[],labelValue_pos_label=[],mixedChart_pos_label=[],currentPos_left=[],currentPos_top=[],gauge_currentPos_left=[],gauge_currentPos_top=[],labelValue_currentPos_left=[],labelValue_currentPos_top=[],mixedChart_currentPos_left=[],mixedChart_currentPos_top=[],chart_id_button=[],gauge_id_button=[],mixedchart_id_button=[],lbv_val=[],lbv_title_span=[],lbv_title_name=[],lbv_unit_span=[],lbv_unit_name=[];function createChart(a){var e=JSON.stringify(a),t=JSON.parse(e),n=t.chartTitle,l=String(t.chartWidth),i=String(t.chartHeight),u=t.yaxisLabel,d=t.yMin,r=t.yMax,o=t.gridXdisplay,_=t.gridYdisplay,s=t.ChartSpawnPosition,h=t.type,b=t.yData,m=t.xData,c=t.lineColor,g=t.fillColor,p=t.theme,C=t.spawnAnimate,v=t.spawnPoint;target_spawn_div=document.getElementById(s),buff_div[_numChart]=document.createElement("div"),buff_div[_numChart].id="ch-block"+_numChart,buff_div[_numChart].className="chartframe";var w=l+"px",f=i+"px";buff_div[_numChart].style.width=w,buff_div[_numChart].style.height=f,spawnChartCanvas[_numChart]=document.createElement("canvas"),spawnChartCanvas[_numChart].id="ch"+_numChart,spawnChartCanvas[_numChart].className="w3-card w3-hover-shadow bevelBox",pos_label[_numChart]=document.createElement("span"),pos_label[_numChart].className="pos-label-span",pos_label[_numChart].id="ch-block"+_numChart+"-pos";var x,V=document.createTextNode("widget info");V.className="pos-txt-node",pos_label[_numChart].appendChild(V),chart_id_button[_numChart]=document.createElement("button"),chart_id_button[_numChart].className="w3-button chart-id-btn",chart_id_button[_numChart].id="chart-id-btn"+_numChart,chart_id_button[x=_numChart].addEventListener("click",function(){alert("chart_widget_id :"+x)},!1);var L=document.createTextNode("widget ID");chart_id_button[_numChart].appendChild(L),buff_div[_numChart].appendChild(chart_id_button[_numChart]),buff_div[_numChart].appendChild(spawnChartCanvas[_numChart]),buff_div[_numChart].appendChild(pos_label[_numChart]),target_spawn_div.appendChild(buff_div[_numChart]),chart_position["#ch"+_numChart]=$("#ch"+_numChart).position();var k,y,M="#ch-block"+_numChart;switch($(M).draggable({grid:[5,5],stop:function(){chart_position[M]=$(M).position();var a="L:"+chart_position[M].left+",T:"+chart_position[M].top;a+=", w:"+w+", h:"+f,$(M+"-pos").text(a)},drag:function(){}}),p){case"light":k="#5e5e5e",y="#ededed",spawnChartCanvas[_numChart].style.backgroundColor="white";break;case"dark":k="#727272",y="#232323",spawnChartCanvas[_numChart].style.backgroundColor="black";break;case"oakwood":k="#727272",y="#232323",spawnChartCanvas[_numChart].style.backgroundColor="rgb(33, 18, 0)";break;default:k="#5e5e5e",y="#ededed",spawnChartCanvas[_numChart].style.backgroundColor="white"}if(chart[_numChart]=new Chart(spawnChartCanvas[_numChart],{type:h,data:{labels:m,datasets:[{label:n,fill:!0,lineTension:.5,backgroundColor:g,borderColor:c,data:b}]},options:{legend:{labels:{fontColor:k}},animation:!1,scales:{xAxes:[{ticks:{fontSize:9,fontColor:k},gridLines:{display:o,borderDash:[20,10],color:y}}],yAxes:[{ticks:{fontSize:10,fontColor:k,min:d,max:r},gridLines:{display:_,borderDash:[5,15],color:y},scaleLabel:{display:!0,labelString:u,fontColor:k}}]}}}),$("#ch-block"+_numChart).hide(),C)switch(v){case"center":var G=($(window).width()-l)/2,S=($(window).height()-i)/2;$("#ch-block"+_numChart).animate({left:G,top:S},100),$("#ch-block"+_numChart).fadeIn("400");break;case"top center":G=($(window).width()-l)/2,S=0;$("#ch-block"+_numChart).animate({left:G,top:S},100),$("#ch-block"+_numChart).fadeIn("400");break;case"bottom center":G=($(window).width()-l)/2,S=$(window).height()-i;$("#ch-block"+_numChart).animate({left:G,top:S},100),$("#ch-block"+_numChart).fadeIn("400");break;default:G=($(window).width()-l)/2,S=($(window).height()-i)/2;$("#ch-block"+_numChart).animate({left:G,top:S},100),$("#ch-block"+_numChart).fadeIn("400")}_numChart++}function updateChart(a){var e=JSON.stringify(a),t=JSON.parse(e),n=t.chart_widget_id,l=t.yData,i=t.xData;chart[n].data.datasets[0].data=l,chart[n].data.labels=i,chart[n].update()}function createGauge(a){var e=JSON.stringify(a),t=JSON.parse(e),n=t.gaugeTitle,l=String(t.gaugeWidth),i=String(t.gaugeHeight),u=t.gaugeTitleFontSize,d=t.gaugeTitleFontColor,r=t.gaugeValueFontColor,o=t.initialValue,_=t.minScale,s=t.maxScale,h=t.GaugeSpawnPosition,b=t.reverseScale,m=t.unitName,c=" "+String(t.symbol),g=t.pointer,p=t.scaleWidth,C=t.theme,v=t.spawnAnimate,w=t.spawnPoint;target_spawn_div=document.getElementById(h),spawnGaugeCanvas[_numGauge]=document.createElement("div"),spawnGaugeCanvas[_numGauge].id="g"+_numGauge,spawnGaugeCanvas[_numGauge].className="w3-card w3-hover-shadow gauge bevelBox";var f=l+"px",x=i+"px";spawnGaugeCanvas[_numGauge].style.width=f,spawnGaugeCanvas[_numGauge].style.height=x,gauge_pos_label[_numGauge]=document.createElement("span"),gauge_pos_label[_numGauge].className="gauge-pos-label-span",gauge_pos_label[_numGauge].id="g"+_numGauge+"-pos";var V=Number(i)+50,L="-"+String(V)+"px";gauge_pos_label[_numGauge].style.top=L;var k,y=document.createTextNode("widget info");y.className="pos-txt-node",gauge_pos_label[_numGauge].appendChild(y),gauge_id_button[_numGauge]=document.createElement("button"),gauge_id_button[_numGauge].className="w3-button gauge-id-btn",gauge_id_button[_numGauge].id="gauge-id-btn"+_numGauge,gauge_id_button[k=_numGauge].addEventListener("click",function(){alert("gauge_widget_id : "+k)},!1);var M=document.createTextNode("widget ID");gauge_id_button[_numGauge].appendChild(M);var G=Number(i)+35,S="-"+String(G)+"px";gauge_id_button[_numGauge].style.top=S,spawnGaugeCanvas[_numGauge].appendChild(gauge_id_button[_numGauge]),spawnGaugeCanvas[_numGauge].appendChild(gauge_pos_label[_numGauge]),target_spawn_div.appendChild(spawnGaugeCanvas[_numGauge]),gauge_position["#g"+_numGauge]=$("#g"+_numGauge).position();var N,I="#g"+_numGauge;switch($(I).draggable({grid:[5,5],stop:function(){gauge_position[I]=$(I).position();var a="L:"+gauge_position[I].left+",T:"+gauge_position[I].top;a+=", w:"+f+", h:"+x,$(I+"-pos").text(a)},drag:function(){}}),C){case"light":spawnGaugeCanvas[_numGauge].classList.add("light-gauge"),N="#ccc";break;case"dark":spawnGaugeCanvas[_numGauge].classList.add("dark-gauge"),N="#ccc";break;case"oakwood":spawnGaugeCanvas[_numGauge].classList.add("oakwood-gauge"),N="#ccc";break;default:spawnGaugeCanvas[_numGauge].classList.add("light-gauge"),N="#ccc"}if(gauge[_numGauge]=new JustGage({id:"g"+_numGauge,value:o,min:_,max:s,reverse:b,title:String(n),titleMinFontSize:u,titleFontColor:d,valueFontColor:r,label:m,symbol:c,pointer:g,pointerOptions:{toplength:8,bottomlength:-20,bottomwidth:6,color:N},gaugeWidthScale:p,counter:!0}),$("#g"+_numGauge).hide(),v)switch(w){case"center":var T=($(window).width()-l)/2,E=($(window).height()-i)/2;$("#g"+_numGauge).animate({left:T,top:E},100),$("#g"+_numGauge).fadeIn("400");break;case"top center":T=($(window).width()-l)/2,E=0;$("#g"+_numGauge).animate({left:T,top:E},100),$("#g"+_numGauge).fadeIn("400");break;case"bottom center":T=($(window).width()-l)/2,E=$(window).height()-i;$("#g"+_numGauge).animate({left:T,top:E},100),$("#g"+_numGauge).fadeIn("400");break;default:T=($(window).width()-l)/2,E=($(window).height()-i)/2;$("#g"+_numGauge).animate({left:T,top:E},100),$("#g"+_numGauge).fadeIn("400")}_numGauge++}function updateGauge(a){var e=JSON.stringify(a),t=JSON.parse(e),n=t.gauge_widget_id,l=parseFloat(t.Data).toFixed(2);gauge[n].refresh(l)}function createLabelValue(a){var e=JSON.stringify(a),t=JSON.parse(e),n=t.labelValueTitle,l=t.labelValueTitleColor,i=String(t.labelValueWidth),u=String(t.labelValueHeight),d=t.labelValueSpawnPosition,r=t.labelValueTxt,o=t.labelValueUnit,_=t.labelValueUnitColor,s=t.labelValueFontColor,h=t.labelValueFontSize,b=String(t.labelValueBGcolor),m=t.spawnAnimate,c=t.spawnPoint;target_spawn_div=document.getElementById(d),spawnLabelValue[_numLabelValue]=document.createElement("div"),spawnLabelValue[_numLabelValue].id="lbv"+_numLabelValue,spawnLabelValue[_numLabelValue].className="w3-card w3-hover-shadow label-value-div bevelBox";var g=i+"px",p=u+"px";spawnLabelValue[_numLabelValue].style.width=g,spawnLabelValue[_numLabelValue].style.height=p,spawnLabelValue[_numLabelValue].style.backgroundColor=b,lbv_title_span[_numLabelValue]=document.createElement("span"),lbv_title_span[_numLabelValue].className="lbv-title-txt",lbv_title_span[_numLabelValue].style.color=l,lbv_title_span[_numLabelValue].id="lbv_title"+_numLabelValue,lbv_title_name[_numLabelValue]=document.createTextNode(String(n)),lbv_title_span[_numLabelValue].style.left="5px",lbv_title_span[_numLabelValue].style.top="5px",lbv_title_span[_numLabelValue].appendChild(lbv_title_name[_numLabelValue]),lbv_unit_span[_numLabelValue]=document.createElement("span"),lbv_unit_span[_numLabelValue].className="lbv-unit-txt",lbv_unit_span[_numLabelValue].style.color=_,lbv_unit_span[_numLabelValue].id="lbv_unit"+_numLabelValue,lbv_unit_name[_numLabelValue]=document.createTextNode(String(o)),lbv_unit_span[_numLabelValue].style.right="5px",lbv_unit_span[_numLabelValue].style.bottom="5px",lbv_unit_span[_numLabelValue].appendChild(lbv_unit_name[_numLabelValue]),lbv_val[_numLabelValue]=document.createElement("span"),lbv_val[_numLabelValue].className="lbv-val-txt",lbv_val[_numLabelValue].id="lbv_val"+_numLabelValue;var C=document.createTextNode(r);lbv_val[_numLabelValue].style.left=String(.25*Number(i))+"px",lbv_val[_numLabelValue].style.bottom=String(.15*Number(u))+"px",lbv_val[_numLabelValue].style.fontSize=String(Number(h))+"px",lbv_val[_numLabelValue].style.color=String(s),lbv_val[_numLabelValue].appendChild(C),labelValue_pos_label[_numLabelValue]=document.createElement("span"),labelValue_pos_label[_numLabelValue].className="labelValue-pos-label-span",labelValue_pos_label[_numLabelValue].id="lbv"+_numLabelValue+"-pos";var v=document.createTextNode("widget info");v.className="pos-txt-node",labelValue_pos_label[_numLabelValue].appendChild(v),spawnLabelValue[_numLabelValue].appendChild(lbv_title_span[_numLabelValue]),spawnLabelValue[_numLabelValue].appendChild(lbv_unit_span[_numLabelValue]),spawnLabelValue[_numLabelValue].appendChild(labelValue_pos_label[_numLabelValue]),spawnLabelValue[_numLabelValue].appendChild(lbv_val[_numLabelValue]),target_spawn_div.appendChild(spawnLabelValue[_numLabelValue]);var w="#lbv"+_numLabelValue;if($(w).draggable({grid:[5,5],stop:function(){labelvalue_position[w]=$(w).position();var a="L:"+labelvalue_position[w].left+",T:"+labelvalue_position[w].top;a+=", w:"+g+", h:"+p,$(w+"-pos").text(a)},drag:function(){}}),$("#lbv"+_numLabelValue).hide(),m)switch(c){case"center":var f=($(window).width()-i)/2,x=($(window).height()-u)/2;$("#lbv"+_numLabelValue).animate({left:f,top:x},100),$("#lbv"+_numLabelValue).fadeIn("400");break;case"top center":f=($(window).width()-i)/2,x=0;$("#lbv"+_numLabelValue).animate({left:f,top:x},100),$("#lbv"+_numLabelValue).fadeIn("400");break;case"bottom center":f=($(window).width()-i)/2,x=$(window).height()-u;$("#lbv"+_numLabelValue).animate({left:f,top:x},100),$("#lbv"+_numLabelValue).fadeIn("400");break;default:f=($(window).width()-i)/2,x=($(window).height()-u)/2;$("#lbv"+_numLabelValue).animate({left:f,top:x},100),$("#lbv"+_numLabelValue).fadeIn("400")}_numLabelValue++}function updateLabelValue(a){var e=JSON.stringify(a),t=JSON.parse(e),n=t.label_widget_id,l=t.Data,i="#lbv_val"+String(n);$(i).text(l)}function createMixedChart(a){var e=JSON.stringify(a),t=JSON.parse(e),n=t.type,l=t.ChartSpawnPosition,i=t.chartWidth,u=t.chartHeight,d=t.yMin,r=t.yMax,o=t.gridXdisplay,_=t.gridYdisplay,s=t.yaxisLabel,h=t.xData,b=t.theme,m=t.chart1.chartTitle,c=t.chart1.lineColor,g=t.chart1.fillColor,p=t.chart1.yData,C=t.chart2.chartTitle,v=t.chart2.lineColor,w=t.chart2.fillColor,f=t.chart2.yData,x=t.spawnAnimate,V=t.spawnPoint;target_spawn_div=document.getElementById(l),mixedChart_buff_div[_numMixedChart]=document.createElement("div"),mixedChart_buff_div[_numMixedChart].id="ch-mixed-block"+_numMixedChart,mixedChart_buff_div[_numMixedChart].className="chartframe";var L=i+"px",k=u+"px";mixedChart_buff_div[_numMixedChart].style.width=L,mixedChart_buff_div[_numMixedChart].style.height=k,spawnMixedChartCanvas[_numMixedChart]=document.createElement("canvas"),spawnMixedChartCanvas[_numMixedChart].id="ch-mixed"+_numMixedChart,spawnMixedChartCanvas[_numMixedChart].className="w3-card w3-hover-shadow bevelBox",mixedChart_pos_label[_numMixedChart]=document.createElement("span"),mixedChart_pos_label[_numMixedChart].className="pos-label-span",mixedChart_pos_label[_numMixedChart].id="ch-mixed-block"+_numMixedChart+"-pos";var y,M=document.createTextNode("widget info");M.className="pos-txt-node",mixedChart_pos_label[_numMixedChart].appendChild(M),mixedchart_id_button[_numMixedChart]=document.createElement("button"),mixedchart_id_button[_numMixedChart].className="w3-button chart-id-btn",mixedchart_id_button[_numMixedChart].id="chart-mixed-id-btn"+_numMixedChart,mixedchart_id_button[y=_numMixedChart].addEventListener("click",function(){alert("mixed_chart_widget_id :"+y)},!1);var G=document.createTextNode("widget ID");mixedchart_id_button[_numMixedChart].appendChild(G),mixedChart_buff_div[_numMixedChart].appendChild(mixedchart_id_button[_numMixedChart]),mixedChart_buff_div[_numMixedChart].appendChild(spawnMixedChartCanvas[_numMixedChart]),mixedChart_buff_div[_numMixedChart].appendChild(mixedChart_pos_label[_numMixedChart]),target_spawn_div.appendChild(mixedChart_buff_div[_numMixedChart]),mixedChart_position["#ch-mixed"+_numMixedChart]=$("#ch-mixed"+_numMixedChart).position();var S,N,I="#ch-mixed-block"+_numMixedChart;switch($(I).draggable({grid:[5,5],stop:function(){mixedChart_position[I]=$(I).position();var a="L:"+mixedChart_position[I].left+",T:"+mixedChart_position[I].top;a+=", w:"+L+", h:"+k,$(I+"-pos").text(a)},drag:function(){}}),b){case"light":S="#5e5e5e",N="#ededed",spawnMixedChartCanvas[_numMixedChart].style.backgroundColor="white";break;case"dark":S="#727272",N="#232323",spawnMixedChartCanvas[_numMixedChart].style.backgroundColor="black";break;default:S="#5e5e5e",N="#ededed",spawnMixedChartCanvas[_numMixedChart].style.backgroundColor="white"}if(mixedChart[_numMixedChart]=new Chart(spawnMixedChartCanvas[_numMixedChart],{type:n,data:{labels:h,datasets:[{label:m,fill:!0,lineTension:.5,backgroundColor:g,borderColor:c,data:p},{label:C,fill:!0,lineTension:.5,backgroundColor:w,borderColor:v,data:f}]},options:{legend:{labels:{fontColor:S}},animation:!1,scales:{xAxes:[{ticks:{fontSize:9,fontColor:S},gridLines:{display:o,borderDash:[20,10],color:N}}],yAxes:[{ticks:{fontSize:10,fontColor:S,min:d,max:r},gridLines:{display:_,borderDash:[5,15],color:N},scaleLabel:{display:!0,labelString:s,fontColor:S}}]}}}),$("#ch-mixed-block"+_numMixedChart).hide(),x)switch(V){case"center":var T=($(window).width()-i)/2,E=($(window).height()-u)/2;$("#ch-mixed-block"+_numMixedChart).animate({left:T,top:E},100),$("#ch-mixed-block"+_numMixedChart).fadeIn("400");break;case"top center":T=($(window).width()-i)/2,E=0;$("#ch-mixed-block"+_numMixedChart).animate({left:T,top:E},100),$("#ch-mixed-block"+_numMixedChart).fadeIn("400");break;case"bottom center":T=($(window).width()-i)/2,E=$(window).height()-u;$("#ch-mixed-block"+_numMixedChart).animate({left:T,top:E},100),$("#ch-mixed-block"+_numMixedChart).fadeIn("400");break;default:T=($(window).width()-i)/2,E=($(window).height()-u)/2;$("#ch-mixed-block"+_numMixedChart).animate({left:T,top:E},100),$("#ch-mixed-block"+_numMixedChart).fadeIn("400")}_numMixedChart++}function updateMixedChart(a){var e=JSON.stringify(a),t=JSON.parse(e),n=Number(t.mixed_chart_widget_id),l=t.yData_1,i=t.yData_2,u=t.xData,d=[],r=0;d.push(l),d.push(i);for(var o=mixedChart[n].data,_=0;_<=1;_++)o.datasets[_].data=d[r],r++;mixedChart[n].data.labels=u,mixedChart[n].update()}function setPosition(a,e,t,n){switch(a){case"chart":var l="#ch-block"+String(e);$(l).animate({left:t,top:n},500),$(l).fadeIn("400");break;case"gauge":var i="#g"+String(e);$(i).animate({left:t,top:n},500),$(i).fadeIn("400");break;case"label value":var u="#lbv"+String(e);$(u).animate({left:t,top:n},500),$(u).fadeIn("400");break;case"mixed chart":var d="#ch-mixed-block"+String(e);$(d).animate({left:t,top:n},500),$(d).fadeIn("400")}}function lockWidget(){var a=chart.length,e=gauge.length,t=spawnLabelValue.length,n=mixedChart.length;if(a>0)for(var l=0;l<=a;l++){$("#chart-id-btn"+l).hide(),$("#ch-block"+l+"-pos").hide(),$("#ch-block"+l).draggable({disabled:!0})}if(e>0)for(var i=0;i<=e;i++){$("#gauge-id-btn"+i).hide(),$("#g"+i+"-pos").hide(),$("#g"+i).draggable({disabled:!0})}if(t>0)for(var u=0;u<=t;u++){$("#lbv-id-btn"+u).hide(),$("#lbv"+u+"-pos").hide(),$("#lbv"+u).draggable({disabled:!0})}if(n>0)for(var d=0;d<=n;d++){$("#chart-mixed-id-btn"+d).hide(),$("#ch-mixed-block"+d+"-pos").hide(),$("#ch-mixed-block"+d).draggable({disabled:!0})}}function unlockWidget(){var a=chart.length,e=gauge.length,t=spawnLabelValue.length,n=mixedChart.length;if(a>0)for(var l=0;l<=a;l++){$("#chart-id-btn"+l).fadeIn(400),$("#ch-block"+l+"-pos").fadeIn("400"),$("#ch-block"+l).draggable({disabled:!1})}if(e>0)for(var i=0;i<=e;i++){$("#gauge-id-btn"+i).fadeIn(400),$("#g"+i+"-pos").fadeIn("400"),$("#g"+i).draggable({disabled:!1})}if(t>0)for(var u=0;u<=t;u++){$("#lbv-id-btn"+u).fadeIn("400"),$("#lbv"+u+"-pos").fadeIn("400"),$("#lbv"+u).draggable({disabled:!1})}if(n>0)for(var d=0;d<=n;d++){$("#chart-mixed-id-btn"+d).fadeIn("400"),$("#ch-mixed-block"+d+"-pos").fadeIn("400"),$("#ch-mixed-block"+d).draggable({disabled:!1})}}